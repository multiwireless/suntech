package st600

import (
	"testing"

	"github.com/multiwireless/suntech/st"
	"github.com/stretchr/testify/assert"
)

// page 46, rev 1.00
var sttZipSpec = []byte{0x02,
	0x00, 0x34,
	0x10,
	0x10, 0x08, 0x50, 0x00, 0x10,
	0x01,
	0x00, 0x0a,
	0x08, 0x0a, 0x11, 0x07, 0x29, 0x38,
	0x02, 0xF1, 0x00,
	0x25, 0x47, 0x85, 0x19,
	0x7e, 0x88, 0x68, 0x19,
	0x00, 0x20, 0x51,
	0x00, 0x00, 0x00,
	0x89,
	0x00, 0x00, 0x01, 0xF4,
	0x0F, 0x30,
	0x0c,
	0x01,
	0x00, 0x48,
	0x00, 0x00, 0x07, 0xD0,
	0x04, 0x50,
	0x01,
	0x0C, 0x35,
	0x03}

func TestParseST600ErrZipUnsupported(t *testing.T) {
	p := ParseBytes(sttZipSpec, ParserOpts{})
	assert.False(t, p.Next())
	assert.Equal(t, p.Error(), st.ErrZipUnsupported)
}
